(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=2)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return NumberTimer});class NumberTimer{constructor(object){this.elem=object.elem;this.delay=typeof object.delay==="undefined"?1e3:object.delay;this.max=typeof object.max==="undefined"?parseInt(this.elem.innerText):object.max;this.min=typeof object.min==="undefined"?0:object.max;this.type=typeof object.type==="undefined"?"default":object.type;switch(this.type){case"ease-out":this.bezier=[0,0,.58,1];break;case"default":this.bezier=[0];break}this.iteration=0;this.step=Math.round(this.delay/(this.max-this.min));let currBezier=Math.floor(this.iteration/((this.max-this.min)/this.bezier.length));let interval=setInterval(()=>{this.step=Math.round(this.delay/(this.max-this.min));currBezier=Math.floor(this.iteration/((this.max-this.min)/this.bezier.length));if(this.iteration<this.max-1){this.iteration++;this.elem.innerText=this.iteration}else{this.iteration++;this.elem.innerText=this.iteration;clearInterval(interval)}},this.step*(this.bezier[currBezier]+1))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return popupFunc});class popupFunc{constructor(button,popup,wrapper=true){this.button=button;this.popup=popup;this.wrapper=wrapper;this.openPopupFunc=this.openPopup.bind(this);this.closePopupFunc=this.closePopup.bind(this);if(Array.isArray(this.button)){this.button.forEach(elem=>{elem.addEventListener("click",this.openPopupFunc)})}else{this.button.addEventListener("click",this.openPopupFunc)}if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))})}else{this.popup.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))}}openPopup(event){document.querySelectorAll(".popup-wrapper>div").forEach(elem=>{elem.classList.remove("active")});document.querySelectorAll(".popup").forEach(elem=>{elem.classList.remove("active")});if(event.target.dataset.stopEvent===undefined){event.preventDefault();if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.add("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}});if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}else{this.popup.classList.add("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}window.addEventListener("mousedown",this.closePopupFunc)}}closePopup(event){if(!event.target.classList.contains("close")){event.stopPropagation()}else{if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.remove("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.remove("active")}})}else{this.popup.classList.remove("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.remove("active")}}window.removeEventListener("mousedown",this.closePopupFunc)}}}},function(module,exports,__webpack_require__){__webpack_require__(3);__webpack_require__(0);module.exports=__webpack_require__(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_NumberTimer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);if(document.querySelector("section.top-block")){let swiper=new Swiper("section.top-block .swiper-container",{effect:"fade",pagination:{el:"section.top-block .custom-pagination",clickable:true,renderBullet(index,className){return`<span class=${className}></span>`}}})}if(document.querySelector("[data-aos]")){AOS.init()}if(document.querySelector("section.info-about-us")){function scrollEvent(e){if(pageYOffset>document.querySelector("section.info-about-us").offsetTop-window.screen.height){document.querySelectorAll("section.info-about-us .count").forEach(elem=>{new _components_NumberTimer__WEBPACK_IMPORTED_MODULE_0__["default"]({elem:elem.querySelector("span"),delay:2500,type:"ease-out"})});window.removeEventListener("scroll",scrollEvent)}}window.addEventListener("scroll",scrollEvent)}if(document.querySelector("footer .container>a")){document.querySelector("footer .container>a").addEventListener("click",e=>{e.preventDefault();window.scrollTo({top:0,behavior:"smooth"})})}if(document.querySelector("header nav>ul>li.has_child")){if(window.screen.width>790){document.querySelectorAll("header nav>ul>li.has_child").forEach(elem=>{let elemOffsetLeft=elem.parentNode.offsetLeft+elem.offsetLeft;elem.querySelectorAll("li.has_child>ul").forEach(child=>{let childOffsetLeft=elemOffsetLeft;let elem=child;while(elem.parentNode.classList.contains("has_child")||elem.parentNode.classList.contains("sub_menu")){elem=elem.parentNode;if(elem.parentNode.classList.contains("sub_menu")){childOffsetLeft+=elem.parentNode.offsetWidth}}let childOffsetRight=window.screen.width-childOffsetLeft;if(childOffsetRight-child.offsetWidth<0){child.classList.add("reverse")}})})}else{document.querySelectorAll("header nav li.has_child").forEach(elem=>{elem.addEventListener("click",function(e){if(e.target===elem){if(elem.parentNode.querySelector(".back-btn")){elem.parentNode.querySelector(".back-btn").remove()}let btn=document.createElement("button");btn.classList.add("back-btn");btn.innerHTML=`Наша продукция`;function btnEvent(parentElem,btnElem){let linksNode=document.querySelector("header nav .links");let leftPos=Math.abs(parseInt(window.getComputedStyle(linksNode).getPropertyValue("left")));leftPos-=linksNode.offsetWidth;linksNode.style.left=`-${leftPos}px`;linksNode.style.height=`${parentElem.closest("ul").scrollHeight}px`;if(parentElem.closest(".sub_menu")){let parentSubMenu=parentElem.closest(".sub_menu");let newBtn=document.createElement("button");newBtn.classList.add("back-btn");newBtn.innerHTML=`Наша продукция`;newBtn.addEventListener("click",function(){btnEvent(parentElem.parentNode.closest(".has_child"),this)});parentSubMenu.prepend(newBtn)}btnElem.remove()}btn.addEventListener("click",function(){btnEvent(elem.closest(".has_child"),this)});elem.querySelector("ul").prepend(btn);let linksNode=document.querySelector("header nav .links");let leftPos=Math.abs(parseInt(window.getComputedStyle(linksNode).getPropertyValue("left")));leftPos+=linksNode.offsetWidth;linksNode.style.left=`-${leftPos}px`;linksNode.style.height=`${elem.querySelector("ul").scrollHeight}px`}},true)})}}if(window.screen.width<=790){document.querySelector("header .burger").addEventListener("click",function(){this.classList.toggle("active");document.querySelector("header .refs").classList.toggle("active")})}if(document.querySelector('[data-popup*="-popup"]')){document.querySelectorAll('[data-popup*="-popup"]').forEach(elem=>{new _components_popupFunc__WEBPACK_IMPORTED_MODULE_1__["default"](elem,document.querySelector(`.popup.${elem.dataset.popup}`))})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibW9kdWxlcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJnZXREZWZhdWx0IiwiZ2V0TW9kdWxlRXhwb3J0cyIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJOdW1iZXJUaW1lciIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJlbGVtIiwiZGVsYXkiLCJtYXgiLCJwYXJzZUludCIsImlubmVyVGV4dCIsIm1pbiIsInR5cGUiLCJiZXppZXIiLCJpdGVyYXRpb24iLCJzdGVwIiwiTWF0aCIsInJvdW5kIiwiY3VyckJlemllciIsImZsb29yIiwibGVuZ3RoIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJwb3B1cEZ1bmMiLCJidXR0b24iLCJwb3B1cCIsIndyYXBwZXIiLCJvcGVuUG9wdXBGdW5jIiwib3BlblBvcHVwIiwiY2xvc2VQb3B1cEZ1bmMiLCJjbG9zZVBvcHVwIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZXZlbnQiLCJkb2N1bWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRhcmdldCIsImRhdGFzZXQiLCJzdG9wRXZlbnQiLCJ1bmRlZmluZWQiLCJwcmV2ZW50RGVmYXVsdCIsImFkZCIsInBhcmVudE5vZGUiLCJjb250YWlucyIsIndpbmRvdyIsInNjcmVlbiIsIndpZHRoIiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2NvbXBvbmVudHNfTnVtYmVyVGltZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwic3dpcGVyIiwiU3dpcGVyIiwiZWZmZWN0IiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwiaW5kZXgiLCJjbGFzc05hbWUiLCJBT1MiLCJpbml0Iiwic2Nyb2xsRXZlbnQiLCJlIiwicGFnZVlPZmZzZXQiLCJvZmZzZXRUb3AiLCJoZWlnaHQiLCJzY3JvbGxUbyIsInRvcCIsImJlaGF2aW9yIiwiZWxlbU9mZnNldExlZnQiLCJvZmZzZXRMZWZ0IiwiY2hpbGQiLCJjaGlsZE9mZnNldExlZnQiLCJvZmZzZXRXaWR0aCIsImNoaWxkT2Zmc2V0UmlnaHQiLCJidG4iLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYnRuRXZlbnQiLCJwYXJlbnRFbGVtIiwiYnRuRWxlbSIsImxpbmtzTm9kZSIsImxlZnRQb3MiLCJhYnMiLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInN0eWxlIiwibGVmdCIsImNsb3Nlc3QiLCJzY3JvbGxIZWlnaHQiLCJwYXJlbnRTdWJNZW51IiwibmV3QnRuIiwicHJlcGVuZCIsInRvZ2dsZSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsU0FFVCxJQUFJQyxpQkFBbUIsR0FHdkIsU0FBU0Msb0JBQW9CQyxVQUc1QixHQUFHRixpQkFBaUJFLFVBQVcsQ0FDOUIsT0FBT0YsaUJBQWlCRSxVQUFVQyxRQUduQyxJQUFJQyxPQUFTSixpQkFBaUJFLFVBQVksQ0FDekNHLEVBQUdILFNBQ0hJLEVBQUcsTUFDSEgsUUFBUyxJQUlWSixRQUFRRyxVQUFVSyxLQUFLSCxP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QUFjLE1BQU04QyxRQUFRakIsS0FDakMsSUFBSU0sVUFBWWxELFNBQVNlLGNBQWMscUJBQ3ZDLElBQUlvQyxRQUFVekUsS0FBSzBFLElBQUlqRixTQUFTd0MsT0FBTzBDLGlCQUFpQkgsV0FBV0ksaUJBQWlCLFVBQ3BGSCxTQUFZRCxVQUFxQixZQUNqQ0EsVUFBVUssTUFBTUMsU0FBV0wsWUFDM0JELFVBQVVLLE1BQU1yQixVQUFZbEUsS0FBSytDLGNBQWMsTUFBTTJDLG1CQUUxRCxTQUlmLEdBQUkvQyxPQUFPQyxPQUFPQyxPQUFTLElBQUssQ0FDNUJiLFNBQVNlLGNBQWMsa0JBQWtCbEIsaUJBQWlCLFFBQVMsV0FDL0Q5QixLQUFLa0MsVUFBVTZELE9BQU8sVUFDdEI5RCxTQUFTZSxjQUFjLGdCQUFnQmQsVUFBVTZELE9BQU8sWUFNaEUsR0FBSTlELFNBQVNlLGNBQWMsMEJBQTBCLENBQ2pEZixTQUFTRixpQkFBaUIsMEJBQTBCRixRQUFTNUIsT0FDekQsSUFBSW1ELG1EQUFtRCxXQUFXbkQsS0FBTWdDLFNBQVNlLHdCQUF3Qi9DLEtBQUtvQyxRQUFRaEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuLyoqKioqKi8gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vKioqKioqLyBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLyoqKioqKi8gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4vKioqKioqLyBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbi8qKioqKiovIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gbnM7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gTnVtYmVyVGltZXI7IH0pO1xuY2xhc3MgTnVtYmVyVGltZXIge1xyXG4gICAgY29uc3RydWN0b3Iob2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtID0gb2JqZWN0LmVsZW07XHJcbiAgICAgICAgdGhpcy5kZWxheSA9IHR5cGVvZiBvYmplY3QuZGVsYXkgPT09IFwidW5kZWZpbmVkXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxMDAwIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlbGF5O1xyXG4gICAgICAgIHRoaXMubWF4ID0gdHlwZW9mIG9iamVjdC5tYXggPT09IFwidW5kZWZpbmVkXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuZWxlbS5pbm5lclRleHQpIDpcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF4O1xyXG4gICAgICAgIHRoaXMubWluID0gdHlwZW9mIG9iamVjdC5taW4gPT09IFwidW5kZWZpbmVkXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgIDAgOlxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tYXg7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZW9mIG9iamVjdC50eXBlID09PSBcInVuZGVmaW5lZFwiID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RlZmF1bHQnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnR5cGU7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImVhc2Utb3V0XCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlemllciA9IFswLDAsMC41OCwxXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5iZXppZXIgPSBbMF07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pdGVyYXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMuc3RlcCA9IE1hdGgucm91bmQodGhpcy5kZWxheSAvICh0aGlzLm1heCAtIHRoaXMubWluKSk7XHJcbiAgICAgICAgbGV0IGN1cnJCZXppZXIgPSBNYXRoLmZsb29yKHRoaXMuaXRlcmF0aW9uIC8gKCh0aGlzLm1heCAtIHRoaXMubWluKSAvIHRoaXMuYmV6aWVyLmxlbmd0aCApKTtcclxuICAgICAgICBsZXQgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0ZXAgPSBNYXRoLnJvdW5kKHRoaXMuZGVsYXkgLyAodGhpcy5tYXggLSB0aGlzLm1pbikpO1xyXG4gICAgICAgICAgICBjdXJyQmV6aWVyID0gTWF0aC5mbG9vcih0aGlzLml0ZXJhdGlvbiAvICgodGhpcy5tYXggLSB0aGlzLm1pbikgLyB0aGlzLmJlemllci5sZW5ndGggKSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLml0ZXJhdGlvbiA8IHRoaXMubWF4IC0gMSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZXJhdGlvbisrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtLmlubmVyVGV4dCA9IHRoaXMuaXRlcmF0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRpb24rKztcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbS5pbm5lclRleHQgPSB0aGlzLml0ZXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLnN0ZXAgKiAodGhpcy5iZXppZXJbY3VyckJlemllcl0gKyAxKSApXHJcbiAgICB9XHJcbn1cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwb3B1cEZ1bmM7IH0pO1xuY2xhc3MgcG9wdXBGdW5jIHtcclxuICAgIGNvbnN0cnVjdG9yKGJ1dHRvbixwb3B1cCx3cmFwcGVyID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuYnV0dG9uID0gYnV0dG9uO1xyXG4gICAgICAgIHRoaXMucG9wdXAgPSBwb3B1cDtcclxuICAgICAgICB0aGlzLndyYXBwZXIgPSB3cmFwcGVyO1xyXG4gICAgICAgIHRoaXMub3BlblBvcHVwRnVuYyA9IHRoaXMub3BlblBvcHVwLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwRnVuYyA9IHRoaXMuY2xvc2VQb3B1cC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIGlmICggQXJyYXkuaXNBcnJheSh0aGlzLmJ1dHRvbikpe1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Qb3B1cEZ1bmMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuUG9wdXBGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wb3B1cCkpe1xyXG4gICAgICAgICAgICB0aGlzLnBvcHVwLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCcuY2xvc2UnKS5mb3JFYWNoKGVsZW0gPT4gZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VQb3B1cEZ1bmMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcuY2xvc2UnKS5mb3JFYWNoKGVsZW0gPT4gZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VQb3B1cEZ1bmMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvcGVuUG9wdXAoZXZlbnQpe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cC13cmFwcGVyPmRpdicpLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihldmVudC50YXJnZXQuZGF0YXNldC5zdG9wRXZlbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmNsb3NlUG9wdXBGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbG9zZVBvcHVwKGV2ZW50KXtcclxuICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlJykpe1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucG9wdXAucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13cmFwcGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuY2xvc2VQb3B1cEZ1bmMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcbl9fd2VicGFja19yZXF1aXJlX18oMCk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX051bWJlclRpbWVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxyXG5cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLnRvcC1ibG9jaycpKXtcclxuICAgIGxldCBzd2lwZXIgPSBuZXcgU3dpcGVyKCdzZWN0aW9uLnRvcC1ibG9jayAuc3dpcGVyLWNvbnRhaW5lcicse1xyXG4gICAgICAgIGVmZmVjdDogJ2ZhZGUnLFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6ICdzZWN0aW9uLnRvcC1ibG9jayAuY3VzdG9tLXBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlbmRlckJ1bGxldChpbmRleCwgY2xhc3NOYW1lKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9JHtjbGFzc05hbWV9Pjwvc3Bhbj5gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYW9zXScpKXtcclxuICAgIEFPUy5pbml0KCk7XHJcbn1cclxuLyogICAgICAgICAgRkVBVFVSRVMgTlVNQkVSICAgICAgICAqL1xyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb24uaW5mby1hYm91dC11cycpKXtcclxuICAgIGZ1bmN0aW9uIHNjcm9sbEV2ZW50KGUpe1xyXG4gICAgICAgIGlmKHBhZ2VZT2Zmc2V0ID4gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb24uaW5mby1hYm91dC11cycpLm9mZnNldFRvcCAtIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSl7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlY3Rpb24uaW5mby1hYm91dC11cyAuY291bnQnKS5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBfY29tcG9uZW50c19OdW1iZXJUaW1lcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbTogZWxlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDI1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vhc2Utb3V0J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxFdmVudClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsRXZlbnQpXHJcblxyXG59XHJcblxyXG4vKiAgICAgICAgICBGRUFUVVJFUyBOVU1CRVIgICAgICAgICovXHJcblxyXG4vKiAgICAgICAgICBGT09URVIgQlROIFNDUk9MTCBUTyAgICAqL1xyXG5cclxuaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyIC5jb250YWluZXI+YScpKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvb3RlciAuY29udGFpbmVyPmEnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+e1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xyXG4gICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG59XHJcblxyXG4vKiAgICAgICAgICBGT09URVIgQlROIFNDUk9MTCBUTyAgICAqL1xyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciBuYXY+dWw+bGkuaGFzX2NoaWxkJykpe1xyXG4gICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPiA3OTApIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdoZWFkZXIgbmF2PnVsPmxpLmhhc19jaGlsZCcpLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlbGVtT2Zmc2V0TGVmdCA9IGVsZW0ucGFyZW50Tm9kZS5vZmZzZXRMZWZ0ICsgZWxlbS5vZmZzZXRMZWZ0O1xyXG4gICAgICAgICAgICBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaS5oYXNfY2hpbGQ+dWxcIikuZm9yRWFjaChjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGRPZmZzZXRMZWZ0ID0gZWxlbU9mZnNldExlZnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW0gPSBjaGlsZDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChlbGVtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXNfY2hpbGQnKSB8fCBlbGVtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdWJfbWVudScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnc3ViX21lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE9mZnNldExlZnQgKz0gZWxlbS5wYXJlbnROb2RlLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZE9mZnNldFJpZ2h0ID0gd2luZG93LnNjcmVlbi53aWR0aCAtIGNoaWxkT2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZE9mZnNldFJpZ2h0IC0gY2hpbGQub2Zmc2V0V2lkdGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgncmV2ZXJzZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2hlYWRlciBuYXYgbGkuaGFzX2NoaWxkJykuZm9yRWFjaChlbGVtID0+IHtcclxuICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IGVsZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrLWJ0bicpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrLWJ0bicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JhY2stYnRuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmlubmVySFRNTCA9IGDQndCw0YjQsCDQv9GA0L7QtNGD0LrRhtC40Y9gO1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGJ0bkV2ZW50KHBhcmVudEVsZW0sYnRuRWxlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5rc05vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgbmF2IC5saW5rcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGVmdFBvcyA9IE1hdGguYWJzKHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGxpbmtzTm9kZSkuZ2V0UHJvcGVydHlWYWx1ZSgnbGVmdCcpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRQb3MgLT0gKGxpbmtzTm9kZS5vZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzTm9kZS5zdHlsZS5sZWZ0ID0gYC0ke2xlZnRQb3N9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rc05vZGUuc3R5bGUuaGVpZ2h0ID0gYCR7cGFyZW50RWxlbS5jbG9zZXN0KCd1bCcpLnNjcm9sbEhlaWdodH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtLmNsb3Nlc3QoJy5zdWJfbWVudScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50U3ViTWVudSA9IHBhcmVudEVsZW0uY2xvc2VzdCgnLnN1Yl9tZW51Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdCdG4uY2xhc3NMaXN0LmFkZCgnYmFjay1idG4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0J0bi5pbm5lckhUTUwgPSBg0J3QsNGI0LAg0L/RgNC+0LTRg9C60YbQuNGPYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5FdmVudChwYXJlbnRFbGVtLnBhcmVudE5vZGUuY2xvc2VzdCgnLmhhc19jaGlsZCcpLHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFN1Yk1lbnUucHJlcGVuZChuZXdCdG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkVsZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuRXZlbnQoZWxlbS5jbG9zZXN0KCcuaGFzX2NoaWxkJyksIHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yKCd1bCcpLnByZXBlbmQoYnRuKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGlua3NOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIG5hdiAubGlua3MnKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGVmdFBvcyA9IE1hdGguYWJzKHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGxpbmtzTm9kZSkuZ2V0UHJvcGVydHlWYWx1ZSgnbGVmdCcpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdFBvcyArPSAobGlua3NOb2RlLm9mZnNldFdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rc05vZGUuc3R5bGUubGVmdCA9IGAtJHtsZWZ0UG9zfXB4YDtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rc05vZGUuc3R5bGUuaGVpZ2h0ID0gYCR7ZWxlbS5xdWVyeVNlbGVjdG9yKCd1bCcpLnNjcm9sbEhlaWdodH1weGA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRydWUpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5pZiAod2luZG93LnNjcmVlbi53aWR0aCA8PSA3OTApIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAuYnVyZ2VyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgLnJlZnMnKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbi8qICAgICAgICAgIHBvcHVwIGZ1bmMgICovXHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcG9wdXAqPVwiLXBvcHVwXCJdJykpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcG9wdXAqPVwiLXBvcHVwXCJdJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgbmV3IF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXShlbGVtLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucG9wdXAuJHtlbGVtLmRhdGFzZXQucG9wdXB9YCkpXHJcbiAgICB9KVxyXG59XHJcblxyXG4vKiAgICAgICAgICBwb3B1cCBmdW5jICAqL1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7Il0sImZpbGUiOiJtYWluLW1pbi5qcyJ9
